---
interface Props {
  latitude: number;
  longitude: number;
  placeName?: string;
  title?: string;
  class?: string;
  zoom?: number;
}

const {
  latitude,
  longitude,
  placeName = 'Mala mlekara Janić',
  title = 'Локација - Мала Млекара Јанић',
  class: className = '',
  zoom = 15
} = Astro.props;

// Construct the embed URL with the place marker
const embedUrl = `https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2893.5!2d${longitude}!3d${latitude}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x475701a1a10a7573%3A0x9526bf88ad660a23!2s${encodeURIComponent(placeName)}!5e0!3m2!1ssr!2srs!4v1705900000000!5m2!1ssr!2srs`;

// Directions URL for the button
const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${latitude},${longitude}&destination_place_id=ChIJc3UKoaEBV0cRI3CtILj_JpU`;
---

<div class={`map-container ${className}`}>
  <div class="relative rounded-xl overflow-hidden shadow-md bg-lightIce">
    <iframe
      src={embedUrl}
      width="100%"
      height="450"
      style="border:0;"
      allowfullscreen=""
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade"
      title={title}
      class="w-full"
    ></iframe>
  </div>

  <div class="mt-4 text-center">
    <a
      href={directionsUrl}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-2 px-6 py-3 bg-primaryBlue text-white rounded-lg hover:bg-primaryBlue/90 transition-colors duration-300 shadow-md hover:shadow-lg"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
      </svg>
      Добијте упутства
    </a>
  </div>
</div>
